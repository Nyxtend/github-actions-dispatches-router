# This repo is used to route dispatches between other repositories to chain builds.

name: Github Actions Dispatches Router
on:
  repository_dispatch:

jobs:
  # Perform initial sorting
  initial-router:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2

      # Setup basics and print out data
      - name: Print environment
        run: |
          echo Starting the dispatches router
          echo Input parameters:
          TEMPFILE=data.json
          echo Creating temporary file ${TEMPFILE}
          echo "${{ fromJson(github.event.client_payload) }}" > ${TEMPFILE}
          
          echo File contents:
          cat ${TEMPFILE}
